# Apollo感知融合能力介绍

更新时间：2021-11-25

本文档旨在简要介绍 Apollo 感知融合模块的原理和过程，并且说明运行 Apollo 感知融合模块的步骤。通过本文档，您可以了解到以下内容：

- Apollo 的感知融合原理
- Apollo 感知融合模块的输入与输出 channel 信息

## 传感器性能比较

在 Apollo 感知模块里，多传感器融合是一个重要的环节，并且也是感知的最后环节。

在感知模块里，不同的传感器各有各的优缺点，而 Apollo 感知模块则是把各个传感器的优点结合起来，在目标级别上进行融合。

下图表示了摄像头（Camera）、毫米波雷达（Radar）和激光雷达（Lidar）传感器在不同任务和不同条件下的性能。其中，

- 摄像头：对于分类任务尤其准确，
- 毫米波雷达：在穿透性、距离估计和极端天气抗干扰性具有卓越的性能，
- 激光雷达：擅长目标检测任务。

如果能有效将三种传感器进行融合感知，就能在各种情况下都能达到优良的性能。

![img](https://bce.bdstatic.com/doc/Apollo-Homepage-Document/Apollo_Doc_CN_6_0/sensors_cc93aca.png)



## 感知融合模块的原理

Apollo 感知融合模块能支持对摄像头、毫米波雷达和激光雷达传感器感知的结果进行目标级融合。

通过对各传感器检测算法输出的障碍物分析，结合每个障碍物的传感器来源、位置、形状、速度、类别等信息，以及历史目标跟踪的信息，过滤掉一些检测不准确的障碍物。

并且感知融合模块根据各个传感器的优缺点，调整障碍物的类别、位置、形状、速度等属性，最终融合输出，得到当前帧的结果。

![img](https://bce.bdstatic.com/doc/Apollo-Homepage-Document/Apollo_Doc_CN_6_0/fusion_flow_c230d5d.png)



## 感知融合模块的相关参数

以下是感知融合模块的输入和输出的 channel 说明。

| channel 名称                      | 输入输出 | channel 说明                                                 |
| --------------------------------- | -------- | ------------------------------------------------------------ |
| /perception/inner/PrefusedObjects | 输入     | 统一输入 channel。各传感器感知的结果都会输出到该 channel 里作为感知融合模块的源数据。 |
| /apollo /perception/obstacles     | 输出     | 感知融合模块的主要输出 channel。该 channel 输出的是多传感器融合之后的障碍物信息。 |